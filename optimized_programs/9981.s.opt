tst r0, 3
rsbeq r0, r1, r3, lsr 9
rsbne r0, r1, r2
bfi r1, r0, 0, 2
bfi r1, r0, 2, 1
