tst r0, 31
rsbeq r1, r2, r1, lsl 1
sub r2, r3, r1, lsr 1
eor r2, r2, r1
