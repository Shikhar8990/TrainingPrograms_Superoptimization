tst r0, r1
mvnne r2, r0
rsbge r0, r3, r3, lsl 1
orr r1, r0, r3
mov r0, r1
