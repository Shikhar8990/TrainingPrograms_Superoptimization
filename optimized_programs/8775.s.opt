tst r0, r1
addne r2, r1, r0, lsl 6
addge r2, r2, r2, lsr 11
mvn r3, r2, asr 2
