tst r0, r1
addeq r0, r1, r1
bic r2, r2, 3
and r2, r0, r2, lsl 3
ror r3, r2, 14
and r3, r3, r0
