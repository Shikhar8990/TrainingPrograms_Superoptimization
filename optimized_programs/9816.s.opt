cmp r0, r1
andeq r1, r0, r2, lsl 10
lsr r0, r1, r1
sub r1, r0, 1
