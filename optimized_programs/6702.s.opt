tst r0, 8
subeq r1, r2, r1, lsl 1
and r0, r1, r1, ror 3
bfi r0, r0, 2, 1
