tst r0, r1
mvnne r2, r0
cmp r3, 0
rsbhi r2, r3, r2, lsr 1
lsr r2, r2, 6
