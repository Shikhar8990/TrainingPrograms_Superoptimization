tst r0, r1
orreq r0, r2, 4
bic r0, r0, 6
sub r2, r0, r0, ror 15
bfi r3, r2, 0, 2
