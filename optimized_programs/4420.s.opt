tst r0, 3
rsbne r1, r2, r0
subcs r1, r0, r3
add r1, r1, r1, lsl 2
