and r0, r1, r0
cmp r1, r0
sublt r0, r2, 12
lsl r3, r0, 8
rsb r0, r3, 1
movcs r0, r0, asr 16
