tst r0, 31
rsbne r1, r1, r0, lsr 31
add r0, r1, r1, lsr 31
