mov r0, r1 
orr r1, r0, r1, ror #2 
tst r1, r0 
movne r1, r2, asr #3 
add r3, r1, r1, ror #1 
